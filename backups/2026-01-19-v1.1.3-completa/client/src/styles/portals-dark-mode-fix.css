/**
 * Portal Dark Mode Fix
 * 
 * Este archivo contiene una solución para el problema donde los portales
 * (menús desplegables, selectores, etc.) pierden el tema dark/light.
 */

/* Asegurar que los portales hereden el tema correcto */
[data-portal-theme="dark"],
html.dark [data-radix-portal],
html.dark [data-radix-popper-content-wrapper] {
  color-scheme: dark !important;
  
  /* Forzar variables de tema oscuro */
  --background: 224 71% 4% !important;
  --foreground: 213 31% 91% !important;
  --card: 224 71% 12% !important;
  --card-foreground: 213 31% 91% !important;
  --popover: 224 71% 12% !important;
  --popover-foreground: 213 31% 91% !important;
  --primary: 239 84% 67% !important;
  --primary-foreground: 0 0% 100% !important;
  --secondary: 270 73% 18% !important;
  --secondary-foreground: 270 80% 85% !important;
  --muted: 223 47% 18% !important;
  --muted-foreground: 215 20% 65% !important;
  --accent: 152 75% 40% !important;
  --accent-foreground: 0 0% 100% !important;
  --destructive: 0 84% 60% !important;
  --destructive-foreground: 0 0% 100% !important;
  --border: 216 34% 17% !important;
  --input: 216 34% 17% !important;
  --ring: 239 84% 67% !important;
}

[data-portal-theme="light"],
html.light [data-radix-portal],
html.light [data-radix-popper-content-wrapper] {
  color-scheme: light !important;
  
  /* Forzar variables de tema claro */
  --background: 210 50% 98% !important;
  --foreground: 215 25% 27% !important;
  --card: 0 0% 100% !important;
  --card-foreground: 215 25% 27% !important;
  --popover: 0 0% 100% !important;
  --popover-foreground: 215 25% 27% !important;
  --primary: 239 84% 67% !important;
  --primary-foreground: 0 0% 100% !important;
  --secondary: 270 80% 95% !important;
  --secondary-foreground: 270 70% 40% !important;
  --muted: 220 14% 96% !important;
  --muted-foreground: 215 20% 65% !important;
  --accent: 152 75% 40% !important;
  --accent-foreground: 0 0% 100% !important;
  --border: 220 13% 91% !important;
  --input: 220 13% 91% !important;
  --ring: 239 84% 67% !important;
}

/* Aplicar estilos a los contenedores de portal */
html.dark [data-radix-portal] [role="dialog"],
html.dark [data-radix-portal] [role="menu"],
html.dark [data-radix-portal] [role="listbox"],
html.dark [data-radix-popper-content-wrapper] [role="dialog"],
html.dark [data-radix-popper-content-wrapper] [role="menu"],
html.dark [data-radix-popper-content-wrapper] [role="listbox"] {
  background-color: hsl(224 71% 12%) !important;
  border-color: hsl(216 34% 17%) !important;
  color: hsl(213 31% 91%) !important;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.1) !important;
}

html.light [data-radix-portal] [role="dialog"],
html.light [data-radix-portal] [role="menu"],
html.light [data-radix-portal] [role="listbox"],
html.light [data-radix-popper-content-wrapper] [role="dialog"],
html.light [data-radix-popper-content-wrapper] [role="menu"],
html.light [data-radix-popper-content-wrapper] [role="listbox"] {
  background-color: hsl(0 0% 100%) !important;
  border-color: hsl(220 13% 91%) !important;
  color: hsl(215 25% 27%) !important;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06) !important;
}

/* Asegurar que elementos específicos de UI tengan el tema correcto */
html.dark [data-radix-portal] .bg-popover,
html.dark [data-radix-popper-content-wrapper] .bg-popover {
  background-color: hsl(224 71% 12%) !important;
}

html.light [data-radix-portal] .bg-popover,
html.light [data-radix-popper-content-wrapper] .bg-popover {
  background-color: hsl(0 0% 100%) !important;
}

/* Forzar el tema en selectores, menús y popovers específicos */
html.dark .SelectContent,
html.dark .DropdownMenuContent,
html.dark .PopoverContent {
  background-color: hsl(224 71% 12%) !important;
  border-color: hsl(216 34% 17%) !important;
  color: hsl(213 31% 91%) !important;
}

html.light .SelectContent,
html.light .DropdownMenuContent,
html.light .PopoverContent {
  background-color: hsl(0 0% 100%) !important;
  border-color: hsl(220 13% 91%) !important;
  color: hsl(215 25% 27%) !important;
}