/* 
 * Theme Sync CSS
 * Este archivo contiene reglas para asegurar que los portales 
 * (dropdowns, selects, dialogs, popovers) mantengan el mismo tema que el documento
 */

/* Solución 1: Aplicar el tema directamente a los wrappers de los portales */

/* Forzar el tema para portales en modo oscuro */
html.dark [data-radix-popper-content-wrapper] {
  color-scheme: dark !important;
  --background: 224 71% 4% !important;
  --foreground: 213 31% 91% !important;
  --muted: 223 47% 11% !important;
  --muted-foreground: 215.4 16.3% 56.9% !important;
  --popover: 224 71% 4% !important;
  --popover-foreground: 215 20.2% 65.1% !important;
  --card: 224 71% 4% !important;
  --card-foreground: 213 31% 91% !important;
  --border: 216 34% 17% !important;
  --input: 216 34% 17% !important;
}

/* Forzar el tema para portales en modo claro */
html.light [data-radix-popper-content-wrapper] {
  color-scheme: light !important;
  --background: 0 0% 100% !important;
  --foreground: 224 71.4% 4.1% !important;
  --muted: 220 14.3% 95.9% !important;
  --muted-foreground: 220 8.9% 46.1% !important;
  --popover: 0 0% 100% !important;
  --popover-foreground: 224 71.4% 4.1% !important;
  --card: 0 0% 100% !important;
  --card-foreground: 224 71.4% 4.1% !important;
  --border: 220 13% 91% !important;
  --input: 220 13% 91% !important;
}

/* Solución 2: Asegurar que los selectores Radix mantengan el tema del documento */
[data-radix-popper-content-wrapper] [data-theme=dark] {
  color-scheme: dark !important;
  --background: 224 71% 4% !important;
  --foreground: 213 31% 91% !important;
  --muted: 223 47% 11% !important;
  --muted-foreground: 215.4 16.3% 56.9% !important;
  --popover: 224 71% 4% !important;
  --popover-foreground: 215 20.2% 65.1% !important;
  --card: 224 71% 4% !important;
  --card-foreground: 213 31% 91% !important;
  --border: 216 34% 17% !important;
  --input: 216 34% 17% !important;
}

[data-radix-popper-content-wrapper] [data-theme=light] {
  color-scheme: light !important;
  --background: 0 0% 100% !important;
  --foreground: 224 71.4% 4.1% !important;
  --muted: 220 14.3% 95.9% !important;
  --muted-foreground: 220 8.9% 46.1% !important;
  --popover: 0 0% 100% !important;
  --popover-foreground: 224 71.4% 4.1% !important;
  --card: 0 0% 100% !important;
  --card-foreground: 224 71.4% 4.1% !important;
  --border: 220 13% 91% !important;
  --input: 220 13% 91% !important;
}

/* Solución 3: Evitar que los portales cambien el tema del documento */
body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: -1;
  background-color: var(--background);
}

/* Fijar el fondo en el elemento body */
body {
  transition: background-color 0.1s ease-in-out;
}

/* Tema oscuro forzado */
html.dark, 
html.dark body {
  background-color: hsl(224 71% 4%) !important;
  color: hsl(213 31% 91%) !important;
}

/* Tema claro forzado */
html.light,
html.light body {
  background-color: hsl(0 0% 100%) !important;
  color: hsl(224 71.4% 4.1%) !important;
}

/* Añadir un pseudo-elemento para mantener el color de fondo correcto */
body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: -999;
  pointer-events: none;
}

/* Establecer el color de fondo del pseudo-elemento según el tema */
html.dark body::before {
  background-color: hsl(224 71% 4%) !important;
}

html.light body::before {
  background-color: hsl(0 0% 100%) !important;
}

/* Evitar que los portales tengan un fondo que pueda afectar al documento */
[data-radix-portal], 
[data-radix-popper-content-wrapper] {
  background-color: transparent !important;
}