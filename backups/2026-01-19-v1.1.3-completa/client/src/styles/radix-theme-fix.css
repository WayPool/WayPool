/**
 * Solución definitiva para el problema del fondo negro en selectores
 * 
 * Este archivo contiene reglas CSS específicas que solucionan el problema
 * donde la página completa se vuelve negra al abrir selectores o popovers.
 */

/* Mantener el tema en el documento principal */
html.dark {
  background-color: rgb(9, 14, 33) !important;
  color-scheme: dark !important;
}

html.light {
  background-color: #ffffff !important;
  color-scheme: light !important;
}

html.dark body,
html.dark #root {
  background-color: rgb(9, 14, 33) !important;
}

html.light body,
html.light #root {
  background-color: #ffffff !important;
}

/* Regla 2: Reparar los Portales de Radix UI */
[data-radix-portal] {
  isolation: isolate !important; /* Crear un nuevo contexto de apilamiento */
  z-index: auto !important; /* Evitar que afecte a otros elementos */
  background-color: transparent !important; /* Fondo transparente */
}

/* Asegurar que los portales usen las variables CSS correctas */
html.dark [data-radix-portal] * {
  --background: 224 71% 4% !important;
  --foreground: 213 31% 91% !important;
  --card: 224 71% 12% !important;
  --card-foreground: 213 31% 91% !important;
  --popover: 224 71% 12% !important;
  --popover-foreground: 213 31% 91% !important;
  --primary: 239 84% 67% !important;
  --primary-foreground: 0 0% 100% !important;
  --secondary: 270 73% 18% !important;
  --secondary-foreground: 270 80% 85% !important;
  --muted: 223 47% 18% !important;
  --muted-foreground: 215 20% 65% !important;
  --accent: 152 75% 40% !important;
  --accent-foreground: 0 0% 100% !important;
  --border: 216 34% 17% !important;
  --input: 216 34% 17% !important;
  --ring: 239 84% 67% !important;
}

html.light [data-radix-portal] * {
  --background: 210 50% 98% !important;
  --foreground: 215 25% 27% !important;
  --card: 0 0% 100% !important;
  --card-foreground: 215 25% 27% !important;
  --popover: 0 0% 100% !important;
  --popover-foreground: 215 25% 27% !important;
  --primary: 239 84% 67% !important;
  --primary-foreground: 0 0% 100% !important;
  --secondary: 270 80% 95% !important;
  --secondary-foreground: 270 70% 40% !important;
  --muted: 220 14% 96% !important;
  --muted-foreground: 215 20% 65% !important;
  --accent: 152 75% 40% !important;
  --accent-foreground: 0 0% 100% !important;
  --border: 220 13% 91% !important;
  --input: 220 13% 91% !important;
  --ring: 239 84% 67% !important;
}

/* Regla 3: Reparar los wrappers de popper content */
[data-radix-popper-content-wrapper] {
  isolation: isolate !important;
  z-index: 9999 !important; /* Asegurar que esté por encima del contenido */
  background-color: transparent !important;
}

/* Asegurar que los elementos dentro de los poppers tengan colores correctos */
html.dark [data-radix-popper-content-wrapper] [role="dialog"],
html.dark [data-radix-popper-content-wrapper] [role="menu"],
html.dark [data-radix-popper-content-wrapper] [role="listbox"] {
  background-color: hsl(224 71% 12%) !important;
  border-color: hsl(216 34% 17%) !important;
  color: hsl(213 31% 91%) !important;
}

html.light [data-radix-popper-content-wrapper] [role="dialog"],
html.light [data-radix-popper-content-wrapper] [role="menu"],
html.light [data-radix-popper-content-wrapper] [role="listbox"] {
  background-color: hsl(0 0% 100%) !important;
  border-color: hsl(220 13% 91%) !important;
  color: hsl(215 25% 27%) !important;
}

/* Regla 4: Forzar colores para elementos de menú y opciones de selección */
html.dark [role="menuitem"],
html.dark [role="option"] {
  color: hsl(213 31% 91%) !important;
}

html.dark [role="menuitem"]:hover,
html.dark [role="option"]:hover,
html.dark [role="menuitem"][data-highlighted],
html.dark [role="option"][data-highlighted] {
  background-color: hsl(239 84% 67%) !important;
  color: white !important;
}

html.light [role="menuitem"],
html.light [role="option"] {
  color: hsl(215 25% 27%) !important;
}

html.light [role="menuitem"]:hover,
html.light [role="option"]:hover,
html.light [role="menuitem"][data-highlighted],
html.light [role="option"][data-highlighted] {
  background-color: hsl(220 14% 96%) !important;
  color: hsl(215 25% 27%) !important;
}

/* Regla 5: Crear un fondo persistente para asegurar colores correctos */
body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: -9999;
  pointer-events: none;
}

html.dark body::before {
  background-color: rgb(9, 14, 33) !important;
}

html.light body::before {
  background-color: #ffffff !important;
}

/* Regla 6: Forzar tema en selectores */
html.dark .Select--open .SelectContent,
html.dark .Select--open .SelectViewport,
html.dark .Select--open .SelectItem {
  --background: 224 71% 4%;
  --foreground: 213 31% 91%;
  background-color: hsl(224 71% 12%) !important;
  color: hsl(213 31% 91%) !important;
}

html.light .Select--open .SelectContent,
html.light .Select--open .SelectViewport,
html.light .Select--open .SelectItem {
  --background: 0 0% 100%;
  --foreground: 215 25% 27%;
  background-color: hsl(0 0% 100%) !important;
  color: hsl(215 25% 27%) !important;
}